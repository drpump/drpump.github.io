---
layout: post_with_photo
title: Grappling with software development on an iPad
photo: 
caption: 
photo-meta: Pana GX7, Pana 12-32mm, 2019 Stanwell Tops, NSW Australia
---

Software development on an iPad is possible but not straightforward. Here's how I went about it. 

## Where I landed

This article describes the trials, tribulations and hair-pulling that occurred when I tried to do software
development on my iPad. But for the impatient, let me summarise.

Even using cloud compute for test and run activities, development directly on the iPad proved near-impossible. 
There were two key issues:

1. There are some great text editors available for the iPad, but excluding iVim, none allow you to 
   do search/replace across multiple files. Refactoring (e.g. rename a function) is consequently 
   a nightmare. iVim is OK if you can deal with vi/vim modal editing and a completely text-driven UI,
   but that was a step too far for me.
2. The kicker is that all of the browsers on the iPad are based on Apple webkit and don't include any inspect
   or debug capabilities. If you're building a web application, it becomes impossible to test or debug. 

The solution was to use a Raspberry Pi 4 as a _companion_ device, as popularized by TechCraft on his series
of YouTube videos. 

### My portable setup

[image]

The iPad powers and connects to the pi via USB-C. I drive the Pi interface with Jump Desktop. Jump Desktop allows me
me to use the iPad screen as a trackpad and is generally pretty friendly for portable useage. My parts list:

1. Apple magic keyboard (mine is the older version)
2. Incase Origami keyboard cover/stand
3. Raspberry Pi 4 (4GB) with 128GB Samsung EVO SD card and Raspbian in an Argon Neo case
4. 15cm (6") USB-C (USB-2 spec) cable. The earlier Pi 4 devices had an error in their USB-C wiring, and
   can only be powered by USB-2 spec cables. USB-3 spec cables don't generally work.

### Adding power

To charge the iPad while connected, I needed to add:
4. A USB-C hub with power delivery (mine is [link], cost AUD$50 (~USD$35))
5. USB-A to USB-C cable to connect from the hub to the Pi

[image]

A few notes here are worthwhile:

* The Pi power + network only works via the Pi USB-C port, hence the USB-A to USB-C cable
* The network connectivity to the Pi works by making the Pi look like a USB ethernet adapter. Hubs
  with a built-in ethernet port effectively hide the Pi, so won't work. 
* You have to connect the pi **last** when you set this up. The powered hub and its "master" (the iPad) 
  negotiate power delivery to the USB-A ports when you connect to the master. This causes power 
  to fluctuate at these ports and the pi reboots without a clean shutdown (bad). 

### With an external monitor

If I have an external monitor (e.g. at the office), I can connect the Pi to the monitor and use a 
real mouse as depicted here:

[image]

As long as Jump Desktop has the current focus on the iPad, keystrokes on the iPad keyboard are passed through to 
Raspbian. Having Jump Desktop as a slideover app is sufficient, which means I can fairly easily switch between
coding on the Pi and local apps on the iPad. Alternatively, I could connect a keyboard directly to the Pi but 
this takes a bit more desk space. 

The mouse can be used in the portable configuration above but it makes the setup a bit less 
portable and harder to use on a plane or in other confined spaces. 

### Ongoing issues

This setup is not perfect and is probably only suitable for small projects. Some key issues that I have encountered:

* I've found that a number of dev tools and applications don't run out-of-the-box on ARM devices. For example,
  a Ruby gem (therubyracer) builds a nodejs environment using the `depot` tools when installed. The `depot` 
  version used doesn't support ARM as a target architecture. Workaround was to use an alternative gem.
* There are quite a lot of docker images that don't have an ARM build. ElasticSearch, for example. Workaround
  is to install the app locally or build a custom image, assuming it will run on ARM.
* The Pi 4 is quite slow. I use jekyll to build static web sites, and it takes ~20 seconds to rebuild 
  a relatively simple site, compared with ~2 seconds on my 2015 Macbook Pro. Unfortunately, the jekyll 
  incremental build feature is quite buggy and didn't work on the Pi at all. I/O speeds quite likely
  contribute, so connecting a fast SSD or NVME drive might help, but detracts from portability.
* The combined weight of the bits is around 2kg, which makes it heavier than quite a number of 
  lightweight Intel laptops. The iPad cover and keyboard + cover count for a big chunk of this weight,
  so replacing them with an Apple keyboard folio would bring us down to about 1.5kg (if you can live without
  a dedicated Escape key).

These issues are not insurmountable, but make it a less productive environment for coding than a traditional 
laptop. 